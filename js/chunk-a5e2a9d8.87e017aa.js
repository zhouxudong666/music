(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5e2a9d8"],{"0c94":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg-icon",{style:t.svgStyle,attrs:{"icon-class":"explicit"}})},a=[],n=(i("a9e3"),i("0032")),r={name:"ExplicitSymbol",components:{SvgIcon:n["a"]},props:{size:{type:Number,default:16}},data:function(){return{svgStyle:{}}},created:function(){this.svgStyle={height:this.size+"px",width:this.size+"px"}}},c=r,l=i("2877"),o=Object(l["a"])(c,s,a,!1,null,"7e2a888e",null);e["a"]=o.exports},"512b":function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return r})),i.d(e,"e",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return o}));var s=i("b775"),a=i("cf45");function n(t){return Object(s["a"])({url:"/artists",method:"get",params:{id:t,timestamp:(new Date).getTime()}}).then((function(t){return t.hotSongs=Object(a["d"])(t.hotSongs),t}))}function r(t){return Object(s["a"])({url:"/artist/album",method:"get",params:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(s["a"])({url:"/toplist/artist",method:"get",params:{type:t}})}function l(t){return Object(s["a"])({url:"/artist/mv",method:"get",params:t})}function o(t){return Object(s["a"])({url:"/artist/sub",method:"post",params:t})}},5696:function(t,e,i){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var s=i("1d80"),a=i("5899"),n="["+a+"]",r=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),l=function(t){return function(e){var i=String(s(e));return 1&t&&(i=i.replace(r,"")),2&t&&(i=i.replace(c,"")),i}};t.exports={start:l(1),end:l(2),trim:l(3)}},6825:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"contextMenu",staticClass:"context-menu"},[t.showMenu?i("div",{ref:"menu",staticClass:"menu",style:{top:t.top,left:t.left},attrs:{tabindex:"-1"},on:{blur:t.closeMenu,click:t.closeMenu}},[t._t("default")],2):t._e()])},a=[],n={name:"ContextMenu",data:function(){return{showMenu:!1,top:"0px",left:"0px"}},methods:{setMenu:function(t,e){var i=window.innerHeight-this.$refs.menu.offsetHeight-25,s=window.innerWidth-this.$refs.menu.offsetWidth-25;t>i&&(t=i),e>s&&(e=s),this.top=t+"px",this.left=e+"px"},closeMenu:function(){this.showMenu=!1,void 0!==this.$parent.closeMenu&&this.$parent.closeMenu()},openMenu:function(t){this.showMenu=!0,this.$nextTick(function(){this.$refs.menu.focus(),this.setMenu(t.y,t.x)}.bind(this)),t.preventDefault()}}},r=n,c=(i("a213"),i("2877")),l=Object(c["a"])(r,s,a,!1,null,"1a1469e1",null);e["a"]=l.exports},"88dc":function(t,e,i){"use strict";var s=i("d31c"),a=i.n(s);a.a},a1a1:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"track-list",style:t.listStyles},[i("ContextMenu",{ref:"menu"},[i("div",{staticClass:"item-info"},[i("img",{attrs:{src:t._f("resizeImage")(t.rightClickedTrack.al.picUrl,224)}}),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v(t._s(t.rightClickedTrack.name))]),i("div",{staticClass:"subtitle"},[t._v(t._s(t.rightClickedTrack.ar[0].name))])])]),i("hr"),i("div",{staticClass:"item",on:{click:t.play}},[t._v(t._s(t.$t("contextMenu.play")))]),i("div",{staticClass:"item",on:{click:t.playNext}},[t._v(t._s(t.$t("contextMenu.playNext")))]),i("hr"),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isRightClickedTrackLiked,expression:"!isRightClickedTrackLiked"}],staticClass:"item",on:{click:t.like}},[t._v(" "+t._s(t.$t("contextMenu.saveToMyLikedSongs"))+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isRightClickedTrackLiked,expression:"isRightClickedTrackLiked"}],staticClass:"item",on:{click:t.like}},[t._v(" "+t._s(t.$t("contextMenu.removeFromMyLikedSongs"))+" ")]),t.extraContextMenuItem.includes("removeTrackFromPlaylist")?i("div",{staticClass:"item",on:{click:t.removeTrackFromPlaylist}},[t._v("从歌单中删除")]):t._e(),i("div",{staticClass:"item",on:{click:t.addTrackToPlaylist}},[t._v("添加到歌单")])]),t._l(t.tracks,(function(e){return i("TrackListItem",{key:e.id,attrs:{track:e},nativeOn:{dblclick:function(i){return t.playThisList(e.id)},contextmenu:function(i){return t.openMenu(i,e)}}})}))],2)},a=[],n=(i("4de4"),i("caad"),i("d81d"),i("b0c0"),i("a9e3"),i("2532"),i("f3f3")),r=i("2f62"),c=i("fefb"),l=i("eb6f"),o=i("1e9a"),u=i("5f87"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"track",class:t.trackClass,style:t.trackStyle,attrs:{title:t.track.reason},on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[t.isAlbum?t._e():i("img",{class:{hover:t.focus},attrs:{src:t._f("resizeImage")(t.imgUrl,224)},on:{click:t.goToAlbum}}),t.isAlbum?i("div",{staticClass:"no"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.focus&&t.track.playable&&!t.isPlaying,expression:"focus && track.playable && !isPlaying"}],on:{click:t.playTrack}},[i("svg-icon",{staticStyle:{height:"14px",width:"14px"},attrs:{"icon-class":"play"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:(!t.focus||!t.track.playable)&&!t.isPlaying,expression:"(!focus || !track.playable) && !isPlaying"}]},[t._v(t._s(t.track.no))]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}]},[i("svg-icon",{staticStyle:{height:"16px",width:"16px"},attrs:{"icon-class":"volume"}})],1)]):t._e(),i("div",{staticClass:"title-and-artist"},[i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.track.name)+" "),t.isAlbum?i("span",{staticClass:"featured"},[i("ArtistsInLine",{attrs:{artists:t.track.ar,exclude:this.$parent.albumObject.artist.name,prefix:"-"}})],1):t._e(),t.isAlbum&&1318912===t.track.mark?i("span",{staticClass:"explicit-symbol"},[i("ExplicitSymbol")],1):t._e()]),t.isAlbum?t._e():i("div",{staticClass:"artist"},[1318912===t.track.mark?i("span",{staticClass:"explicit-symbol before-artist"},[i("ExplicitSymbol",{attrs:{size:15}})],1):t._e(),i("ArtistsInLine",{attrs:{artists:t.artists}})],1)]),i("div")]),t.isTracklist||t.isAlbum?t._e():i("div",{staticClass:"album"},[i("router-link",{attrs:{to:"/album/"+t.track.al.id}},[t._v(t._s(t.track.al.name))]),i("div")],1),t.isTracklist?t._e():i("div",{staticClass:"actions"},[i("button",{on:{click:t.likeThisSong}},[i("svg-icon",{style:{visibility:t.focus&&!t.isLiked&&t.track.playable?"visible":"hidden"},attrs:{"icon-class":"heart"}}),i("svg-icon",{directives:[{name:"show",rawName:"v-show",value:t.isLiked,expression:"isLiked"}],attrs:{"icon-class":"heart-solid"}})],1)]),t.isTracklist?t._e():i("div",{staticClass:"time"},[t._v(" "+t._s(t._f("formatTime")(t.track.dt))+" ")])])},h=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"artist-in-line"},[t._v(" "+t._s(t.computedPrefix)+" "),t._l(t.filteredArtists,(function(e,s){return i("span",{key:e.id},[i("router-link",{attrs:{to:"/artist/"+e.id}},[t._v(t._s(e.name))]),s!==t.filteredArtists.length-1?i("span",[t._v(", ")]):t._e()],1)}))],2)},p=[],k={name:"ArtistInLine",props:{artists:{type:Array,required:!0},exclude:{type:String,default:""},prefix:{type:String,default:""}},computed:{filteredArtists:function(){var t=this;return this.artists.filter((function(e){return e.name!==t.exclude}))},computedPrefix:function(){return 0!==this.filteredArtists.length?this.prefix:""}}},m=k,v=i("2877"),b=Object(v["a"])(m,f,p,!1,null,"6b13d4cd",null),y=b.exports,g=i("0c94"),T={name:"TrackListItem",components:{ArtistsInLine:y,ExplicitSymbol:g["a"]},props:{track:Object},data:function(){return{hover:!1,trackStyle:{}}},computed:Object(n["a"])(Object(n["a"])({},Object(r["d"])(["settings"])),{},{imgUrl:function(){return void 0!==this.track.al?this.track.al.picUrl:void 0!==this.track.album?this.track.album.picUrl:""},artists:function(){return void 0!==this.track.ar?this.track.ar:void 0!==this.track.artists?this.track.artists:[]},type:function(){return this.$parent.type},isAlbum:function(){return"album"===this.type},isTracklist:function(){return"tracklist"===this.type},isPlaylist:function(){return"playlist"===this.type},isLiked:function(){return this.$parent.liked.songs.includes(this.track.id)},isPlaying:function(){return this.$store.state.player.currentTrack.id===this.track.id},trackClass:function(){var t=[this.type];return!this.track.playable&&this.settings.showUnavailableSongInGreyStyle&&t.push("disable"),this.isPlaying&&t.push("playing"),this.focus&&t.push("focus"),t},isMenuOpened:function(){return this.$parent.rightClickedTrack.id===this.track.id},focus:function(){return this.hover&&0===this.$parent.rightClickedTrack.id||this.isMenuOpened}}),methods:{goToAlbum:function(){this.$router.push({path:"/album/"+this.track.al.id})},playTrack:function(){this.$parent.playThisList(this.track.id)},likeThisSong:function(){this.$parent.likeASong(this.track.id)}},created:function(){-1!==this.$parent.itemWidth&&(this.trackStyle={width:this.$parent.itemWidth+"px"})}},x=T,_=(i("88dc"),Object(v["a"])(x,d,h,!1,null,"1c146955",null)),O=_.exports,C=i("6825"),w={name:"TrackList",components:{TrackListItem:O,ContextMenu:C["a"]},props:{tracks:Array,type:String,id:Number,itemWidth:{type:Number,default:-1},dbclickTrackFunc:{type:String,default:"default"},albumObject:{type:Object,default:function(){return{artist:{name:""}}}},extraContextMenuItem:{type:Array,default:function(){return[]}}},data:function(){return{rightClickedTrack:{id:0,name:"",ar:[{name:""}],al:{picUrl:""}},listStyles:{}}},created:function(){"tracklist"===this.type&&(this.listStyles={display:"flex",flexWrap:"wrap"})},computed:Object(n["a"])(Object(n["a"])({},Object(r["d"])(["liked"])),{},{isRightClickedTrackLiked:function(){var t;return this.liked.songs.includes(null===(t=this.rightClickedTrack)||void 0===t?void 0:t.id)}}),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(r["c"])(["updateLikedSongs","updateModal"])),Object(r["b"])(["nextTrack","playTrackOnListByID","showToast"])),{},{openMenu:function(t,e){e.playable&&(this.rightClickedTrack=e,this.$refs.menu.openMenu(t))},closeMenu:function(){this.rightClickedTrack={id:0,name:"",ar:[{name:""}],al:{picUrl:""}}},playThisList:function(t){"default"===this.dbclickTrackFunc?this.playThisListDefault(t):"none"===this.dbclickTrackFunc||("playTrackOnListByID"===this.dbclickTrackFunc?this.playTrackOnListByID(t):"playPlaylistByID"===this.dbclickTrackFunc&&Object(l["e"])(this.id,t))},playThisListDefault:function(t){if("playlist"===this.type)Object(l["e"])(this.id,t);else if("album"===this.type)Object(l["c"])(this.id,t);else if("tracklist"===this.type){var e=this.tracks.map((function(t){return t.id}));Object(l["b"])(e,this.tracks[0].ar[0].id,"artist",t)}},play:function(){Object(l["a"])(this.clickTrack.id,!0)},playNext:function(){Object(l["a"])(this.clickTrack.id)},like:function(){this.likeASong(this.rightClickedTrack.id)},likeASong:function(t){var e=this;if(Object(u["b"])()){var i=!0,s=this.liked.songs;s.includes(t)&&(i=!1),Object(c["d"])({id:t,like:i}).then((function(a){200===a.code&&(!1===i?(e.showToast(e.$t("toast.removedFromMyLikedSongs")),e.updateLikedSongs(s.filter((function(e){return e!==t})))):(e.showToast(e.$t("toast.savedToMyLikedSongs")),s.push(t),e.updateLikedSongs(s)))}))}else this.showToast("此操作需要登录网易云账号")},addTrackToPlaylist:function(){Object(u["b"])()?(this.updateModal({modalName:"addTrackToPlaylistModal",key:"show",value:!0}),this.updateModal({modalName:"addTrackToPlaylistModal",key:"selectedTrackID",value:this.rightClickedTrack.id})):this.showToast("此操作需要登录网易云账号")},removeTrackFromPlaylist:function(){var t=this;if(Object(u["b"])()){if(confirm("确定要从歌单删除 ".concat(this.rightClickedTrack.name,"？"))){var e=this.rightClickedTrack.id;Object(o["a"])({op:"del",pid:this.id,tracks:e}).then((function(i){t.showToast(200===i.body.code?"已从歌单中删除":i.body.message),t.$parent.removeTrack(e)}))}}else this.showToast("此操作需要登录网易云账号")}})},j=w,S=Object(v["a"])(j,s,a,!1,null,"1d2d9b8b",null);e["a"]=S.exports},a213:function(t,e,i){"use strict";var s=i("5696"),a=i.n(s);a.a},a9e3:function(t,e,i){"use strict";var s=i("83ab"),a=i("da84"),n=i("94ca"),r=i("6eeb"),c=i("5135"),l=i("c6b6"),o=i("7156"),u=i("c04e"),d=i("d039"),h=i("7c73"),f=i("241c").f,p=i("06cf").f,k=i("9bf2").f,m=i("58a8").trim,v="Number",b=a[v],y=b.prototype,g=l(h(y))==v,T=function(t){var e,i,s,a,n,r,c,l,o=u(t,!1);if("string"==typeof o&&o.length>2)if(o=m(o),e=o.charCodeAt(0),43===e||45===e){if(i=o.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(o.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+o}for(n=o.slice(2),r=n.length,c=0;c<r;c++)if(l=n.charCodeAt(c),l<48||l>a)return NaN;return parseInt(n,s)}return+o};if(n(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,_=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof _&&(g?d((function(){y.valueOf.call(i)})):l(i)!=v)?o(new b(T(e)),i,_):T(e)},O=s?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;O.length>C;C++)c(b,x=O[C])&&!c(_,x)&&k(_,x,p(b,x));_.prototype=y,y.constructor=_,r(a,v,_)}},d31c:function(t,e,i){},e498:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"d",(function(){return r})),i.d(e,"a",(function(){return c})),i.d(e,"c",(function(){return l}));var s=i("b775"),a=i("cf45");function n(t){return Object(s["a"])({url:"/album",method:"get",params:{id:t}}).then((function(t){return t.songs=Object(a["d"])(t.songs),t}))}function r(t){return Object(s["a"])({url:"/album/new",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/album/detail/dynamic",method:"get",params:{id:t,timestamp:(new Date).getTime()}})}function l(t){return Object(s["a"])({url:"/album/sub",method:"post",params:t})}},eb6f:function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return l})),i.d(e,"e",(function(){return o})),i.d(e,"d",(function(){return u})),i.d(e,"a",(function(){return d}));i("d81d");var s=i("4360"),a=i("e498"),n=i("1e9a"),r=i("512b");function c(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"first",n=t.map((function(t,e){return{sort:e,id:t}}));s["a"].commit("updatePlayerList",n),s["a"].state.player.shuffle&&s["a"].commit("shuffleTheListBeforePlay"),"first"===a?s["a"].dispatch("playFirstTrackOnList"):s["a"].dispatch("playTrackOnListByID",a),s["a"].commit("updateListInfo",{type:i,id:e})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first";Object(a["b"])(t).then((function(i){var s=i.songs.map((function(t){return t.id}));c(s,t,"album",e)}))}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(n["d"])(t,i).then((function(i){var s=i.playlist.trackIds.map((function(t){return t.id}));c(s,t,"playlist",e)}))}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first";Object(r["c"])(t).then((function(i){var s=i.hotSongs.map((function(t){return t.id}));c(s,t,"artist",e)}))}function d(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={sort:0,id:t};s["a"].commit("appendTrackToPlayerList",{track:i,playNext:e}),e&&s["a"].dispatch("nextTrack",!0)}}}]);
//# sourceMappingURL=chunk-a5e2a9d8.87e017aa.js.map